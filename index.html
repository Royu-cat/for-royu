<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript" src="js/jquery-3.5.0.min.js"></script>
    <link href="bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>

    <script type="text/javascript" src="js/jscex.min.js"></script>
    <script type="text/javascript" src="js/jscex-parser.js"></script>
    <script type="text/javascript" src="js/jscex-jit.js"></script>
    <script type="text/javascript" src="js/jscex-builderbase.min.js"></script>
    <script type="text/javascript" src="js/jscex-async.min.js"></script>
    <script type="text/javascript" src="js/jscex-async-powerpack.min.js"></script>
    <script type="text/javascript" src="js/functions.js" charset="utf-8"></script>
    <script type="text/javascript" src="js/love.js" charset="utf-8"></script>
    <link rel="shortcut icon" href="images/love.ico"/>
    <link rel="bookmark" href="/mages/love.ico"/>



    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta charset="UTF-8">
    <title>Hello</title>

    <style type="text/css">
        body{margin:0;padding:0;background:#ffe;font-size:14px;font-family:'微软雅黑','宋体',sans-serif;color:#231F20;overflow:auto}
        a{color:#000;font-size:14px;}
        #main{width:100%;}
        #wrap{position:relative;margin:0 auto;width:1100px;height:680px;margin-top:10px;}
        #text{width:400px;height:425px;left:60px;top:80px;position:absolute;}
        #code{display:none;font-size:16px;}
        #clock-box{position:absolute;left:60px;top:550px;font-size:28px;display:none;}
        #clock-box a{font-size:28px;text-decoration:none;}
        #clock{margin-left:48px;}
        #clock .digit{font-size:64px;}
        #canvas{margin:0 auto;width:1100px;height:680px;}
        #error{margin:0 auto;text-align:center;margin-top:60px;display:none;}
        .hand{cursor:pointer;}
        .say{margin-left:5px;}
        .space{margin-right:150px;}
    </style>

</head>
<body>

<!--Button trigger modal-->
<!--<button type="button" class="btn btn-primary btn-lg" >
    Launch demo modal
</button>-->


<!-- Modal -->
<div class="modal fade bs-example-modal-lg" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Modal title</h4>
            </div>
            <div class="modal-body">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>


<div class="container-fluid">
    <div class="row">
            <div class="">
                <nav class="navbar navbar-default bg-success">
                    <div class="container-fluid">
                        <div>
                            <!-- Nav tabs -->
                            <ul class="nav nav-tabs" role="tablist">
                                <li role="presentation" class="active">
                                    <a href="#home" aria-controls="home" role="tab" data-toggle="tab" id="home_btn">
                                            <span class="glyphicon glyphicon-heart" aria-hidden="true"></span>
                                    </a>
                                </li>
                                <li role="presentation"><a href="#profile" aria-controls="profile" role="tab" data-toggle="tab" id="cartoon">Love Date</a></li>
                                <li role="presentation"><a href="#messages" aria-controls="messages" role="tab" data-toggle="tab">To You</a></li>
                            </ul>
                            <!-- Tab panes -->
                            <div class="tab-content">
                                <div role="tabpanel" class="tab-pane active" id="home">
                                    <div class="container">
                                        <div class="jumbotron">
                                            <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                                                <!-- Indicators -->
                                                <ol class="carousel-indicators">
                                                    <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
                                                    <li data-target="#carousel-example-generic" data-slide-to="1"></li>
                                                    <li data-target="#carousel-example-generic" data-slide-to="2"></li>
                                                </ol>

                                                <!-- Wrapper for slides -->
                                                <div class="carousel-inner" role="listbox">
                                                    <div class="item active">
                                                        <img class="img-responsive img-rounded" src="images/3.jpg" alt="">
                                                        <div class="carousel-caption">
                                                            (づ￣ ³￣)づ
                                                        </div>
                                                    </div>
                                                    <div class="item">
                                                        <img class="img-responsive img-rounded" src="images/2.jpg" alt="">
                                                        <div class="carousel-caption">
                                                            (。’▽’。)♡
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Controls -->
                                                <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
                                                    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                                                    <span class="sr-only">Previous</span>
                                                </a>
                                                <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
                                                    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                                                    <span class="sr-only">Next</span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <div role="tabpanel" class="tab-pane" id="profile">
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-2"></div>
                                            <div class="col-md-8">
                                                <div id="main">
                                                    <div id="wrap">
                                                        <div id="text">
                                                            <div id="code">
                                                                <font color="#ff8c00">
                                                                    <span class="say">呆瓜:</span><br>
                                                                    <span class="say">此生能与你相遇</span><br>
                                                                    <span class="say">便是幸运的事情</span><br>
                                                                    <span class="say">和你在一起很幸福</span><br>
                                                                    <span class="say">也很开心</span><br>
                                                                    <span class="say">尽管会有争吵</span><br>
                                                                    <span class="say">我知道都是我不好</span><br>
                                                                    <span class="say">希望你原谅我</span><br>
                                                                    <span class="say">你是我心中唯一的小可爱</span><br>
                                                                    <span class="say">无人可以代替</span><br>
                                                                    <span class="say">虽然我是一个木鱼脑袋</span><br>
                                                                    <span class="say">但是我的心里只有你</span><br>
                                                                    <span class="say">我爱你</span><br>
                                                                    <span class="say">呆瓜</span><br>
                                                                    <span class="say"></span><br>
                                                                    <span class="say"></span><br>
                                                                    <span class="say"></span><br>
                                                                    <span class="say"></span><br>
                                                                </font>
                                                            </div>
                                                        </div>
                                                        <div id="clock-box">
                                                            <span><font color="#666666">呆瓜，我们在一起已经有</font></span>
                                                            <div id="clock"></div>
                                                        </div>
                                                        <canvas id="canvas" width="1100" height="680"></canvas>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2"></div>
                                        </div>

                                    </div>

                                </div>
                                <div role="tabpanel" class="tab-pane" id="messages">
                                    <div class="container">
                                        <h3>To 呆瓜</h3>
                                        <div class="row">
                                            <div class="col-xs-2 col-md-4"></div>
                                            <div class="col-xs-8 col-md-4">
                                                <h4>
                                                    希望不要在生气气啦，我知道是我不好，脾气太怪了。老是惹你生气气。
                                                    不过你放心啦，我的心里只有你一个人，一直爱你哒。<br>还担心什么，
                                                    你是我的小可爱，
                                                    当然最爱的就是你，虽然不怎么表达，这肯定不会变得啦。爱你~~
                                                    (。’▽’。)♡
                                                </h4>
                                            </div>
                                            <div class="col-xs-2 col-md-4"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(function () {


        var year = 2018;

        var month = 9;

        var day = 1;

        var hour = 9;

        var minute = 30;

        var second = 0;

        var auto_load = false;
        var auto_load_delay = 1000;
        (
            function() {
                var canvas = $('#canvas');
                var bgm = document.getElementById('bgm');
                var width = canvas.width();
                var height = canvas.height();
                canvas.attr("width", width);
                canvas.attr("height", height);
                var opts = {
                    seed: {
                        x: width / 2 - 20,
                        color: "rgb(190, 26, 37)",
                        scale: 2
                    },
                    branch: [[535, 680, 570, 250, 500, 200, 30, 100, [[540, 500, 455, 417, 340, 400, 13, 100, [[450, 435, 434, 430, 394, 395, 2, 40]]], [550, 445, 600, 356, 680, 345, 12, 100, [[578, 400, 648, 409, 661, 426, 3, 80]]], [539, 281, 537, 248, 534, 217, 3, 40], [546, 397, 413, 247, 328, 244, 9, 80, [[427, 286, 383, 253, 371, 205, 2, 40], [498, 345, 435, 315, 395, 330, 4, 60]]], [546, 357, 608, 252, 678, 221, 6, 100, [[590, 293, 646, 277, 648, 271, 2, 80]]]]]],
                    bloom: {
                        num: 700,
                        width: 1080,
                        height: 650,
                    },
                    footer: {
                        width: 1200,
                        height: 2.5,
                        speed: 10,
                    }
                };
                var tree = new Tree(canvas[0], width, height, opts);
                var seed = tree.seed;
                var foot = tree.footer;
                var hold = 1;

                canvas.click(function(e) {
                    var offset = canvas.offset(),
                        x,
                        y;
                    x = e.pageX - offset.left;
                    y = e.pageY - offset.top;
                    if (seed.hover(x, y)) {
                        hold = 0;
                        canvas.unbind("click");
                        canvas.unbind("mousemove");
                        canvas.removeClass('hand');
                        bgm.play();
                    }
                }).mousemove(function(e) {
                    var offset = canvas.offset(),
                        x,
                        y;
                    x = e.pageX - offset.left;
                    y = e.pageY - offset.top;
                    canvas.toggleClass('hand', seed.hover(x, y));
                });
                var seedAnimate = eval(Jscex.compile("async",
                    function() {
                        seed.draw();
                        if(auto_load){
                            hold = 0;
                        }
                        while (hold) {
                            $await(Jscex.Async.sleep(10));
                        }
                        while (seed.canScale()) {
                            seed.scale(0.95);
                            $await(Jscex.Async.sleep(10));
                        }
                        while (seed.canMove()) {
                            seed.move(0, 2);
                            foot.draw();
                            $await(Jscex.Async.sleep(10));
                        }
                    }));
                var growAnimate = eval(Jscex.compile("async",
                    function() {
                        do {
                            tree.grow();
                            $await(Jscex.Async.sleep(10));
                        } while ( tree . canGrow ());
                    }));
                var flowAnimate = eval(Jscex.compile("async",
                    function() {
                        do {
                            tree.flower(2);
                            $await(Jscex.Async.sleep(10));
                        } while ( tree . canFlower ());
                    }));
                var moveAnimate = eval(Jscex.compile("async",
                    function() {
                        tree.snapshot("p1", 240, 0, 610, 680);
                        while (tree.move("p1", 500, 0)) {
                            foot.draw();
                            $await(Jscex.Async.sleep(10));
                        }
                        foot.draw();
                        tree.snapshot("p2", 500, 0, 610, 680);
                        canvas.parent().css("background", "url(" + tree.toDataURL('image/png') + ")");
                        canvas.css("background", "#ffe");
                        $await(Jscex.Async.sleep(300));
                        canvas.css("background", "none");
                    }));
                var jumpAnimate = eval(Jscex.compile("async",
                    function() {
                        var ctx = tree.ctx;
                        while (true) {
                            tree.ctx.clearRect(0, 0, width, height);
                            tree.jump();
                            foot.draw();
                            $await(Jscex.Async.sleep(25));
                        }
                    }));
                var textAnimate = eval(Jscex.compile("async",
                    function() {
                        var together = new Date();
                        together.setFullYear(year, (month - 1), (day - 1));
                        together.setHours(hour);
                        together.setMinutes(minute);
                        together.setSeconds(second);
                        together.setMilliseconds(0);
                        $("#code").show().typewriter();
                        $("#clock-box").fadeIn(500);
                        while (true) {
                            timeElapse(together);
                            $await(Jscex.Async.sleep(1000));
                        }
                    }));
                /*document.addEventListener('DOMContentLoaded', function () {
                    function audioAutoPlay() {
                        bgm.play();
                        document.addEventListener("WeixinJSBridgeReady", function () {
                            bgm.play();
                        }, false);
                    }
                    audioAutoPlay();
                });*/
                var runAsync = eval(Jscex.compile("async",
                    function() {
                        $await(seedAnimate());
                        $await(growAnimate());
                        $await(flowAnimate());
                        $await(moveAnimate());
                        textAnimate().start();
                        $await(jumpAnimate());
                    }));
                runAsync().start();
            })();

        /*$("#cartoon").click(function () {


        })*/
    })

    $("#home_btn").click(function () {
        window.location.reload();
    })
</script>
</body>
</html>